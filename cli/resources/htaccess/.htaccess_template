RewriteEngine on
Options -Indexes +FollowSymLinks -MultiViews

AddType text/cache-manifest .manifest
AddDefaultCharset UTF-8

### OPTIONAL: htaccess-redirect-http
### BEGIN http-redirect
### END http-redirect

### OPTIONAL: htaccess-redirect-https
### BEGIN https-redirect
### END https-redirect

#css | js
RewriteCond   %{REQUEST_URI}                ^/assets
RewriteCond   %{QUERY_STRING}               !(?:^|&)__nocache__(?:$|&) [NC]
RewriteRule   ^assets/(.*)                   /cache/assets/$1 [L]

#media
RewriteCond   %{REQUEST_URI}                ^/media
RewriteCond   %{QUERY_STRING}               !(?:^|&)__nocache__(?:$|&) [NC]
RewriteRule   ^media/(.*)                   /cache/.thumbs/$1 [L]

### OPTIONAL: htaccess-cache
### BEGIN htaccess-cache
### END htaccess-cache

### REQUIRE: Add htaccess-pre-security
### BEGIN htaccess-pre-security
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
### END htaccess-pre-security

<IfModule mod_rewrite.c>
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-l
   RewriteRule ^(.*) /index.php [L,QSA]
</IfModule>

### REQUIRE: htaccess-security
### BEGIN htaccess-security
### END htaccess-security

### OPTIONAL: htaccess-security-cors
### BEGIN security-cors
### END security-cors

### OPTIONAL: htaccess-security-x-frame-options
### BEGIN x-frame-options
### END x-frame-options

### OPTIONAL: htaccess-security-content-security-policy
### BEGIN security-policy
### END security-policy
